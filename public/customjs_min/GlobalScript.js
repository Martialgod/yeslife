var isloggedin="no";function apigetstates(o,i,t){showCustomizeLoading(),$.ajax({type:"GET",url:"/api/getstatebycountry/"+t,data:{},success:function(o){var t="";o.forEach(function(o,i){t=t+"<option value='"+o.name+"'>"+o.name+"</option>"}),$(i).html(t),hideCustomizeLoading()},error:function(o){console.log(o),console.log("error"),hideCustomizeLoading()}})}function validateNumber(o,i){var t=$(o).val().trim();isNaN(t)||null==t||""==t?$(o).val(0):parseFloat(t)<parseFloat(i)&&$(o).val(0)}function countCartCookies(){for(var o=0,i=document.cookie.split(";"),t=0;t<i.length;t++){-1!==i[t].split("=")[0].indexOf("yeslifecart_")&&o++}return o}function addCartCookie(o){toastr.clear(),updateCartCookieCount(o);for(var i=document.cookie.split(";"),t=0;t<i.length;t++){var n=i[t].split("=");-1!==n[0].indexOf("yeslifecart_"+o.productid)&&(o.qty=parseFloat(o.qty)+parseFloat(n[1]))}if(document.cookie="yeslifecart_"+o.productid+"="+o.qty+"; path=/","no"!=isloggedin){var e={fk_products:o.productid,qty:o.qty,fk_users:isloggedin};showCustomizeLoading(),$.ajax({type:"POST",url:"/api/add-cart",data:e,success:function(o){$("#btnaddcart").prop("disabled",!1),hideCustomizeLoading()},error:function(o){console.log(o),console.log("error"),$("#btnaddcart").prop("disabled",!1),hideCustomizeLoading()}})}}function updateCartCookieCount(o){for(var i=!1,t=document.cookie.split(";"),n=0;n<t.length;n++){if(-1!==t[n].split("=")[0].indexOf("yeslifecart_"+o.productid)){i=!0;break}}i?toastr.success("cart updated"):(toastr.success("item added to the cart"),$("#headercartcount").html(parseFloat($("#headercartcount").html().trim())+1))}function getCartCookies(){for(var o=[],i=document.cookie.split(";"),t=0;t<i.length;t++){var n=i[t].split("=");-1!==n[0].indexOf("yeslifecart_")&&o.push({productid:n[0].trim().replace("yeslifecart_",""),qty:n[1]})}return o}function removeCartCookie(o){for(var i=document.cookie.split(";"),t=0;t<i.length;t++){var n=i[t].split("=");-1!==n[0].indexOf("yeslifecart_"+o)&&(document.cookie=n[0]+" =; expires = Thu, 01 Jan 1970 00:00:00 UTC; path=/")}if(toastr.clear(),"no"!=isloggedin){var e={fk_products:o,fk_users:isloggedin};showCustomizeLoading(),$.ajax({type:"DELETE",url:"/api/remove-cart",data:e,success:function(o){$("#btnaddcart").prop("disabled",!1),hideCustomizeLoading()},error:function(o){console.log(o),console.log("error"),$("#btnaddcart").prop("disabled",!1),hideCustomizeLoading()}})}toastr.error("item removed from cart"),getCartCookies().length>0?$("#headercartcount").html(parseFloat($("#headercartcount").html().trim())-1):$("#headercartcount").html("0")}function deleteAllCartCookies(){for(var o=document.cookie.split(";"),i=0;i<o.length;i++){var t=o[i].split("=");-1!==t[0].indexOf("yeslifecart_")&&(console.log(t[0]),document.cookie=t[0]+" =; expires = Thu, 01 Jan 1970 00:00:00 UTC; path=/")}$("#headercartcount").html("0")}function formatDate(o,i){switch(i){case"yyyy-MM-dd":var t=""+((a=new Date(o)).getMonth()+1),n=""+a.getDate(),e=a.getFullYear();return t.length<2&&(t="0"+t),n.length<2&&(n="0"+n),[e,t,n].join("-");case"MM/dd/YYYY h:m:s":t=""+((a=new Date(o)).getMonth()+1),n=""+a.getDate(),e=a.getFullYear();var a,r=""+a.getHours(),s=""+a.getMinutes(),c=""+a.getSeconds();return t.length<2&&(t="0"+t),n.length<2&&(n="0"+n),r.length<2&&(r="0"+r),s.length<2&&(s="0"+s),c.length<2&&(c="0"+c),[t,n,e].join("/")+" "+[r,s,c].join(":");default:return"date not supported..."}}function swalPostParamErrors(o){var i=[];void 0!==o.fk_users&&o.fk_users.forEach(function(o,t){i.push(o)}),void 0!==o.fname&&o.fname.forEach(function(o,t){i.push(o)}),void 0!==o.lname&&o.lname.forEach(function(o,t){i.push(o)}),void 0!==o.uname&&o.uname.forEach(function(o,t){i.push(o)}),void 0!==o.password&&o.password.forEach(function(o,t){i.push(o)}),void 0!==o.email&&o.email.forEach(function(o,t){i.push(o)}),void 0!==o.totalitem&&o.totalitem.forEach(function(o,t){i.push(o)}),void 0!==o.totalamount&&o.totalamount.forEach(function(o,t){i.push(o)}),void 0!==o.netamount&&o.netamount.forEach(function(o,t){i.push(o)}),void 0!==o.billingfname&&o.billingfname.forEach(function(o,t){i.push(o)}),void 0!==o.billinglname&&o.billinglname.forEach(function(o,t){i.push(o)}),void 0!==o.billingphone&&o.billinglname.forEach(function(o,t){i.push(o)}),void 0!==o.billingcountry&&o.billingcountry.forEach(function(o,t){i.push(o)}),void 0!==o.billingstate&&o.billingstate.forEach(function(o,t){i.push(o)}),void 0!==o.billingcity&&o.billingcity.forEach(function(o,t){i.push(o)}),void 0!==o.billingaddress1&&o.billingaddress1.forEach(function(o,t){i.push(o)}),void 0!==o.shippingfname&&o.shippingfname.forEach(function(o,t){i.push(o)}),void 0!==o.shippinglname&&o.shippinglname.forEach(function(o,t){i.push(o)}),void 0!==o.shippingphone&&o.shippinglname.forEach(function(o,t){i.push(o)}),void 0!==o.shippingcountry&&o.shippingcountry.forEach(function(o,t){i.push(o)}),void 0!==o.shippingstate&&o.shippingstate.forEach(function(o,t){i.push(o)}),void 0!==o.shippingcity&&o.shippingcity.forEach(function(o,t){i.push(o)}),void 0!==o.shippingaddress1&&o.shippingaddress1.forEach(function(o,t){i.push(o)}),void 0!==o.city&&o.city.forEach(function(o,t){i.push(o)}),void 0!==o.fk_country&&o.fk_country.forEach(function(o,t){i.push(o)}),void 0!==o.name&&o.name.forEach(function(o,t){i.push(o)}),void 0!==o.description&&o.description.forEach(function(o,t){i.push(o)}),void 0!==o.image&&o.image.forEach(function(o,t){i.push(o)}),void 0!==o.audio&&o.audio.forEach(function(o,t){i.push(o)}),void 0!==o.address_zip&&o.address_zip.forEach(function(o,t){i.push("Address zipcode is "+o)}),void 0!==o.billing_address_zip&&o.billing_address_zip.forEach(function(o,t){i.push("Billing zipcode is "+o)}),void 0!==o.first_name&&o.first_name.forEach(function(o,t){i.push("Firstname is "+o)}),void 0!==o.last_name&&o.last_name.forEach(function(o,t){i.push("Lastname is "+o)}),void 0!==o.phone_number&&o.phone_number.forEach(function(o,t){i.push("Phone No. is "+o)}),void 0!==o.credit_card_number&&o.credit_card_number.forEach(function(o,t){i.push("Card Number is "+o)}),void 0!==o.base&&o.base.forEach(function(o,t){i.push(o)});var t="";i.forEach(function(o,i){t+=o+"<br>"}),swal("Oops! Error(s) found",t,"error")}function showLoadingDiv(o,i){$(o).show(),$(i).hide()}function hideLoadingDiv(o,i){$(o).hide(),$(i).show()}function blockUICustom(o){$.blockUI({message:'<h3> <i class="fa fa-spin fa-spinner" style="color:#fff;"> </i> </h3>',overlayCSS:{opacity:.1},css:{border:"none",backgroundColor:"transparent"}})}function unblockUICustom(o){$.unblockUI()}function showCustomizeLoading(o){$.blockUI({message:'<h2> <i class="fa fa-spin fa-spinner" style="color:#fff;"> </i> </h2>',overlayCSS:{opacity:.1},css:{border:"none",backgroundColor:"transparent"}})}function hideCustomizeLoading(o){$.unblockUI()}$(document).ready(function(){isloggedin=$("#isloggedin").val()}),$(document).ready(function(){$("#select2_fkusers").select2({width:"100%",ajax:{url:"/apisearchusers",delay:500,data:function(o){return{search:o.term}},processResults:function(o){o=o.data;var i=[];return-1===location.href.indexOf("/create")&&i.push({id:"-1",text:"*Display All*"}),o.forEach(function(o,t){i.push(o);var n=i.length-1;i[n].id=o.id,i[n].text=o.fullname+" ( "+o.email+" ) "}),{results:i}}}})}),$("#fk_country").on("change",function(){var o=$("#fk_country").val();$("#statesdropdowndiv").show(),$("#statescustomdiv").hide(),$("#cantfindstate").prop("checked",!1),$("#statescustom").val(null),showCustomizeLoading(),$.ajax({type:"GET",url:"/api/getstatebycountry/"+o,data:{},success:function(o){var i="";o.forEach(function(o,t){i=i+"<option value='"+o.name+"'>"+o.name+"</option>"}),$("#statesdropdown").html(i),hideCustomizeLoading()},error:function(o){console.log(o),console.log("error"),hideCustomizeLoading()}})}),$("#cantfindstate").on("change",function(){1==$(this).prop("checked")?($("#statesdropdowndiv").hide(),$("#statescustomdiv").show()):($("#statesdropdowndiv").show(),$("#statescustomdiv").hide())}),$("#pictx").on("change",function(){var o=$("#pictx");if(o[0].files.length>0&&o[0].files[0].size/1048576>10)return swal("Oops!","maximum file size for the image is 5mb","error"),void $("#pictx").val(null)}),$("#pictxa").on("change",function(){var o=$("#pictxa");if(o[0].files.length>0&&o[0].files[0].size/1048576>10)return swal("Oops!","maximum file size for the image is 5mb","error"),void $("#pictxa").val(null)}),$("#gallery").on("change",function(){var o=$("#gallery");if(o[0].files.length>0&&o[0].files[0].size/1048576>20)return swal("Oops!","maximum file size for the image is 5mb","error"),void $("#gallery").val(null)}),$(".swa-confirm").on("submit",function(o){o.preventDefault(),swal({title:"Are you sure you want to continue?",text:"",type:"warning",showCancelButton:!0,focusCancel:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes"}).then(function(i){i.value&&$(o.currentTarget).off("submit").submit()})}),$(".add-to-cart").submit(function(o){o.preventDefault();var i=[];$(this).serializeArray().forEach(function(o,t){i[o.name]=o.value}),addCartCookie(i)});