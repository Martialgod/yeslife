angular.module("app",["AppServices"]).constant("API_URL","/shop").config(["$httpProvider",function(t){t.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}]).controller("ShopBusinessPartnersController",["$http","SQLSTATEFactory","API_URL","GlobalFactory",function(t,e,o,a){var s=this;s.search=null,s.msccategories=[],s.category="All",s.categorydescription="<h4> All Categories <h4>",s.sortby="default",s.mscproducts=[],s.navlinks={},s.meta={},s.totalamount=0,s.totalnetamount=0,s.LoadCategories=function(){t.get("/shop-categories?v="+Math.random(),{}).then(function(t){var e=t.data;s.msccategories=e,hideCustomizeLoading()},function(t){swal("Opps!","Something went wrong!","error"),console.log(t)})},s.LoadProducts=function(e){e=e||"/shop-search?v="+Math.random(),"All"==s.category?s.categorydescription="<h4> All Categories <h4>":s.msccategories.forEach(function(t,e){s.category==t.pk_category&&(s.categorydescription="<h4>"+t.description+"</h4>"+t.description2)}),s.mscproducts=[],t.post(e,{shoptype:"businesspartners",search:s.search,category:s.category,sortby:s.sortby}).then(function(t){var e=t.data;s.navlinks=e.links,s.meta=e.meta,s.mscproducts=e.data,s.CalculateTotal(),hideCustomizeLoading()},function(t){swal("Opps!","Something went wrong!","error"),console.log(t),hideCustomizeLoading()})},s.MinusPlusQty=function(t,e){e.selectedqty=isNaN(e.selectedqty)||null==e.selectedqty||""==e.selectedqty?0:e.selectedqty,"plus"==t?e.selectedqty++:"minus"==t&&e.selectedqty--,e.selectedqty<=0&&(e.selectedqty=0)},s.UpdateCart=function(t,e){""!=e.selectedqty&&(e.selectedqty=isNaN(e.selectedqty)||null==e.selectedqty||""==e.selectedqty?0:e.selectedqty,e.selectedqty<0&&(e.selectedqty=0))},s.AddToCart=function(t){if(t.selectedqty=isNaN(t.selectedqty)||null==t.selectedqty||""==t.selectedqty?0:t.selectedqty,t.selectedqty>0){var e={productid:t.productid,qty:t.selectedqty};document.cookie="yeslifecart_"+e.productid+"=0; path=/",addCartCookie(e)}else removeCartCookie(t.productid);s.CalculateTotal(),toastr_item_added_to_cart()},s.BulkUpdate=function(){s.mscproducts.forEach(function(t,e){if(t.selectedqty=isNaN(t.selectedqty)||null==t.selectedqty||""==t.selectedqty?0:t.selectedqty,t.selectedqty>0){var o={productid:t.productid,qty:t.selectedqty};document.cookie="yeslifecart_"+o.productid+"=0; path=/",addCartCookie(o)}else removeCartCookie(t.productid)}),s.CalculateTotal()},s.RemoveFromCart=function(t){removeCartCookie(t.productid),t.selectedqty=0,s.CalculateTotal()},s.CalculateTotal=function(){s.totalamount=0,s.totalcoupondiscount=0,s.totaltax=0,s.totalshipcost=0,s.totalnetamount=0,s.mscproducts.forEach(function(t,e){t.totalamount=parseFloat(t.selectedqty)*parseFloat(t.cartdiscountedprice),t.taxamount=0,t.shipamount=0,t.netamount=0,t.netamount=parseFloat(t.totalamount),s.totalamount+=parseFloat(t.totalamount),s.totalnetamount+=parseFloat(t.netamount),t.totalamount=parseFloat(t.totalamount).toFixed(2),t.netamount=parseFloat(t.netamount).toFixed(2)}),s.totalamount=parseFloat(s.totalamount).toFixed(2),s.totalnetamount=parseFloat(s.totalnetamount).toFixed(2)},s.SearchProducts=function(){showCustomizeLoadingNoIcon(),s.mscproducts=[],s.LoadProducts()},showCustomizeLoadingNoIcon(),setTimeout(function(){s.LoadProducts(),setTimeout(function(){s.LoadCategories()},500)},500)}]);