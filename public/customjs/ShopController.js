angular.module("app",["AppServices"]).constant("API_URL","/mail").config(["$httpProvider",function(o){o.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}]).controller("ShopController",["$http","SQLSTATEFactory","API_URL","GlobalFactory",function(o,t,r,i){var e=this;e.search=null,e.category="All",e.sortby="category",e.mscproducts=[],e.navlinks={},e.meta={},$("#div-toolbar").prop("hidden",!0),$("#div-products").prop("hidden",!0),e.StringifyStars=function(){e.mscproducts.forEach(function(o,t){o.stars_string="";for(var r=1;r<=o.ratings;r++)o.stars_string+='<i class="fa fa-star"></i>'})},e.LoadCategories=function(){o.get("/shop-categories?v="+Math.random(),{}).then(function(o){var t=o.data;e.msccategories=t,hideCustomizeLoading()},function(o){swal("Opps!","Something went wrong!","error"),console.log(o)})},e.LoadProducts=function(t){t=t||"/shop-search?v="+Math.random(),$("#btn-view-mode-list").removeClass("active"),$("#btn-view-mode-grid").removeClass("grid active"),$("#btn-view-mode-grid").addClass("grid active"),e.mscproducts=[],$("#div-toolbar").prop("hidden",!0),$("#div-products").prop("hidden",!0),o.post(t,{search:e.search,category:e.category,sortby:e.sortby}).then(function(o){var t=o.data;e.navlinks=t.links,e.meta=t.meta,e.mscproducts=t.data,e.StringifyStars(),hideCustomizeLoading(),$("#div-toolbar").prop("hidden",!1),$("#div-products").prop("hidden",!1)},function(o){swal("Opps!","Something went wrong!","error"),console.log(o),hideCustomizeLoading(),$("#div-toolbar").prop("hidden",!1),$("#div-products").prop("hidden",!1)})},e.AddToCart=function(o){var t={productid:o.productid,qty:o.selectedqty};addCartCookie(t)},e.GlobalBuyNow=function(o){GlobalBuyNow(o.productid,1)},e.RemoveFromCart=function(o){removeCartCookie(o.productid)},e.SearchProducts=function(){showCustomizeLoadingNoIcon(),e.mscproducts=[],e.LoadProducts()},showCustomizeLoadingNoIcon(),setTimeout(function(){e.LoadProducts(),setTimeout(function(){e.LoadCategories()},500)},500)}]);