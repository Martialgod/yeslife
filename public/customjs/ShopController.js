angular.module("app",["AppServices"]).constant("API_URL","/mail").config(["$httpProvider",function(o){o.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}]).controller("ShopController",["$http","SQLSTATEFactory","API_URL","GlobalFactory",function(o,t,e,r){var s=this;s.search=null,s.msccategories=[],s.category="All",s.categorydescription="<h4> All Categories <h4>",s.sortby="default",s.mscproducts=[],s.navlinks={},s.meta={},s.StringifyStars=function(){s.mscproducts.forEach(function(o,t){o.stars_string="";for(var e=1;e<=o.ratings;e++)o.stars_string+='<i class="fa fa-star"></i>'})},s.LoadCategories=function(){o.get("/shop-categories?v="+Math.random(),{}).then(function(o){var t=o.data;s.msccategories=t,hideCustomizeLoading()},function(o){swal("Opps!","Something went wrong!","error"),console.log(o)})},s.LoadProducts=function(t){t=t||"/shop-search?v="+Math.random(),"All"==s.category?s.categorydescription="<h4> All Categories <h4>":s.msccategories.forEach(function(o,t){s.category==o.pk_category&&(s.categorydescription="<h4>"+o.description+"</h4>"+o.description2)}),$("#btn-view-mode-list").removeClass("active"),$("#btn-view-mode-grid").removeClass("active"),$("#btn-view-mode-grid").addClass("active"),$("#div-products").removeClass("list"),$("#div-products").removeClass("grid"),$("#div-products").addClass("grid"),$("#div-product-item").removeClass("grid"),$("#div-product-item").addClass("grid"),s.mscproducts=[],o.post(t,{search:s.search,category:s.category,sortby:s.sortby}).then(function(o){var t=o.data;s.navlinks=t.links,s.meta=t.meta,s.mscproducts=t.data,s.StringifyStars(),hideCustomizeLoading()},function(o){swal("Opps!","Something went wrong!","error"),console.log(o),hideCustomizeLoading()})},s.AddToCart=function(o){var t={productid:o.productid,qty:o.selectedqty};addCartCookie(t)},s.GlobalBuyNow=function(o){GlobalBuyNow(o.productid,1)},s.RemoveFromCart=function(o){removeCartCookie(o.productid)},s.SearchProducts=function(){showCustomizeLoadingNoIcon(),s.mscproducts=[],s.LoadProducts()},showCustomizeLoadingNoIcon(),setTimeout(function(){s.LoadProducts(),setTimeout(function(){s.LoadCategories()},500)},500)}]);