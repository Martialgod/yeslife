angular.module("app",["AppServices"]).constant("API_URL","/mail").config(["$httpProvider",function(o){o.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}]).controller("ShopController",["$http","SQLSTATEFactory","API_URL","GlobalFactory",function(o,t,r,e){var i=this;i.search=null,i.category="All",i.sortby="bestsellers",i.mscproducts=[],i.navlinks={},i.meta={},$("#div-toolbar").prop("hidden",!0),$("#div-products").prop("hidden",!0),i.StringifyStars=function(){i.mscproducts.forEach(function(o,t){o.stars_string="";for(var r=1;r<=o.ratings;r++)o.stars_string+='<i class="fa fa-star"></i>'})},i.LoadCategories=function(){o.get("/shop-categories?v="+Math.random(),{}).then(function(o){var t=o.data;i.msccategories=t,hideCustomizeLoading()},function(o){swal("Opps!","Something went wrong!","error"),console.log(o)})},i.LoadProducts=function(t){t=t||"/shop-search?v="+Math.random(),$("#btn-view-mode-list").removeClass("active"),$("#btn-view-mode-grid").removeClass("grid active"),$("#btn-view-mode-grid").addClass("grid active"),i.mscproducts=[],$("#div-toolbar").prop("hidden",!0),$("#div-products").prop("hidden",!0),o.post(t,{search:i.search,category:i.category,sortby:i.sortby}).then(function(o){var t=o.data;i.navlinks=t.links,i.meta=t.meta,i.mscproducts=t.data,i.StringifyStars(),hideCustomizeLoading(),$("#div-toolbar").prop("hidden",!1),$("#div-products").prop("hidden",!1)},function(o){swal("Opps!","Something went wrong!","error"),console.log(o),hideCustomizeLoading(),$("#div-toolbar").prop("hidden",!1),$("#div-products").prop("hidden",!1)})},i.AddToCart=function(o){var t={productid:o.productid,qty:o.selectedqty};addCartCookie(t)},i.GlobalBuyNow=function(o){GlobalBuyNow(o.productid,1)},i.RemoveFromCart=function(o){removeCartCookie(o.productid)},i.SearchProducts=function(){showCustomizeLoadingNoIcon(),i.mscproducts=[],i.LoadProducts()},showCustomizeLoadingNoIcon(),setTimeout(function(){i.LoadProducts(),setTimeout(function(){i.LoadCategories()},500)},500)}]);