angular.module("app",["AppServices"]).constant("API_URL","/mail").config(["$httpProvider",function(o){o.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}]).controller("ShopController",["$http","SQLSTATEFactory","API_URL","GlobalFactory",function(o,t,a,e){var r=this;r.search=null,r.category="All",r.sortby="default",r.mscproducts=[],r.navlinks={},r.meta={},r.StringifyStars=function(){r.mscproducts.forEach(function(o,t){o.stars_string="";for(var a=1;a<=o.ratings;a++)o.stars_string+='<i class="fa fa-star"></i>'})},r.LoadCategories=function(){o.get("/shop-categories?v="+Math.random(),{}).then(function(o){var t=o.data;r.msccategories=t,hideCustomizeLoading()},function(o){swal("Opps!","Something went wrong!","error"),console.log(o)})},r.LoadProducts=function(t){t=t||"/shop-search?v="+Math.random(),$("#btn-view-mode-list").removeClass("active"),$("#btn-view-mode-grid").removeClass("grid active"),$("#btn-view-mode-grid").addClass("grid active"),r.mscproducts=[],o.post(t,{search:r.search,category:r.category,sortby:r.sortby}).then(function(o){var t=o.data;r.navlinks=t.links,r.meta=t.meta,r.mscproducts=t.data,r.StringifyStars(),hideCustomizeLoading()},function(o){swal("Opps!","Something went wrong!","error"),console.log(o),hideCustomizeLoading()})},r.AddToCart=function(o){var t={productid:o.productid,qty:o.selectedqty};addCartCookie(t)},r.GlobalBuyNow=function(o){GlobalBuyNow(o.productid,1)},r.RemoveFromCart=function(o){removeCartCookie(o.productid)},r.SearchProducts=function(){showCustomizeLoadingNoIcon(),r.mscproducts=[],r.LoadProducts()},showCustomizeLoadingNoIcon(),setTimeout(function(){r.LoadProducts(),setTimeout(function(){r.LoadCategories()},500)},500)}]);