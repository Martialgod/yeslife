(function(){function e(){var e=document.createElement("span");e.setAttribute("class","print-error"),document.getElementById("paymentSubmit").before(e)}function r(){("undefined"==d.rally_firstName||""==d.rally_firstName?(t("rally_firstName"),l("Please enter First Name"),0):"undefined"==d.rally_lastName||""==d.rally_lastName?(t("rally_lastName"),l(" Please provide Last Name "),0):"undefined"==d.rally_email||""==d.rally_email?(t("rally_email"),l(" Please provide Email Id "),0):"undefined"==d.rally_phoneNumber||""==d.rally_phoneNumber?(t("rally_phoneNumber"),l(" Please provide Phone Number "),0):"undefined"==d.rally_addressZip||""==d.rally_addressZip?(t("rally_addressZip"),l(" Please provide Zip Code "),0):"undefined"==d.rally_cardNumber||""==d.rally_cardNumber?(t("rally_cardNumber"),l(" Please provide Card Number "),0):"undefined"==d.rally_cvc||""==d.rally_cvc?(t("rally_cvc"),l(" Please provide CVC "),0):"undefined"==d.rally_expDate||""==d.rally_expDate?(t("rally_expDate"),l("Please provide Expiry Date "),0):"undefined"!=d.rally_amount&&""!=d.rally_amount||(t("rally_amount"),l(" Please provide Amount "),0))&&function(){if(/[^0-9-]+/.test(d.rally_cardNumber))return t("rally_cardNumber"),l("Please enter Proper card number"),!1;if(1!=/^\d{3,4}$/.test(d.rally_cvc))return t("rally_cvc"),l("Please enter Proper CVC"),!1;if(/[^a-zA-Z]+/.test(d.rally_firstName))return t("rally_firstName"),l("Please enter Proper Name"),!1;if(/[^a-zA-Z]+/.test(d.rally_lastName))return t("rally_lastName"),l("Please enter Proper Name"),!1;if(1!=/^\d{1,15}$/.test(d.rally_phoneNumber))return t("rally_phoneNumber"),l("Please enter Proper Phone Number, Make sure it has only numbers"),!1;if(1!=/^\d{1,12}$/.test(d.rally_addressZip))return t("rally_addressZip"),l("Please enter Proper ZIP Code"),!1;if(/[^0-9-]+/.test(d.rally_amount))return t("rally_amount"),l(" Please enter proper Amount "),!1;if(!function(){for(var e=0,r=(""+ +d.rally_cardNumber.replace(/[\W_]/g,"").replace(/[a-zA-Z]/g,"")).split("").reverse(),a=parseInt(r[0]),l=1;l<r.length;l++)if(l%2!=0){var t=2*parseInt(r[l]);t>9&&(t-=9),e+=t}else e+=parseInt(r[l]);return(parseInt(e)+parseInt(a))%10==0}())return t("rally_cardNumber"),l("Please enter Proper card number"),!1;if(!d.rally_email.match(/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/))return t("rally_email"),l("Not a valid Email ID!"),!1;if(-1!=d.rally_expDate.indexOf("-")&&(u=d.rally_expDate.substring(0,d.rally_expDate.indexOf("-")),p=d.rally_expDate.substring(d.rally_expDate.indexOf("-")+1,d.rally_expDate.length)),-1!=d.rally_expDate.indexOf("/")&&(u=d.rally_expDate.substring(0,d.rally_expDate.indexOf("/")),p=d.rally_expDate.substring(d.rally_expDate.indexOf("/")+1,d.rally_expDate.length)),0==u||0==p)return t("rally_expDate"),l("Please provide proper Expiry Date, Make Sure Month & Year is separated only by - or /"),!1;if(/[^0-9-]+/.test(u)||/[^0-9-]+/.test(p))return t("rally_expDate"),l("Please provide proper Expiry Date, Make Sure Month & Year is separated only by - or /"),!1;if(4!=p.length&&2!=p.length)return t("rally_expDate"),l("Please provide Expiry Year in YYYY or YY format"),!1;if(2==p.length){var e=new Date,r=e.getFullYear();if(y2=+(""+r).split("").slice(1,2),p=y2+p,r=+(""+r).split("").slice(0,1),p=+(r+p),parseInt(p)<parseInt(e.getFullYear))return t("rally_expDate"),l("Please provide proper Expiry Year"),!1}return u>12||0>=u?(t("rally_expDate"),l("Please provide proper Expiry Month"),!1):0==d.rally_amount?(t("rally_amount"),l("Donation Amount cannot be 0"),!1):(_="female"==d.rally_gender.toLowerCase()?"F":"male"==d.rally_gender.toLowerCase()?"M":"",!0)}()&&i.ajax({type:"POST",url:"https://rallypay.com/api/v1/donations/paywithcard",headers:{"RALLY-API-TOKEN":o},data:{donation:{credit_card_number:d.rally_cardNumber,credit_card_security_code:d.rally_cvc,credit_card_expiration_month:u,credit_card_expiration_year:p,amount:d.rally_amount,email:d.rally_email,phone_number:d.rally_phoneNumber,first_name:d.rally_firstName,last_name:d.rally_lastName,address_address1:d.rally_addressLine,address_city:d.rally_addressCity,address_state:d.rally_addressState,address_country:d.rally_addressCountry,address_zip:d.rally_addressZip,occupation:d.rally_occupation,employer:d.rally_employer,gender:_},custom_fields:c},async:!0,success:function(e){console.log(e),d.length=0},error:function(e){console.log(e),d.length=0}})}function a(){document.querySelector("span.print-error").style.color="red"}function l(r){i(".print-error").remove(),e(),a(),document.querySelector("span.print-error").innerHTML=r+"<br/><br/>",setTimeout(function(){i(".print-error").text("")},6e3)}function t(e){var r="[data-input="+e+"]",a=document.querySelector(r);a.select(),a.style.borderColor="red",setTimeout(function(){a.style.borderColor="initial"},3e3)}function n(){for(var e=["rally_cardNumber","rally_cvc","rally_expDate","rally_firstName","rally_lastName","rally_email","rally_phoneNumber","rally_addressLine","rally_addressCity","rally_addressState","rally_addressCountry","rally_addressZip","rally_occupation","rally_employer","rally_amount","rally_gender","rally_apiToken"],a=e.length,l=0;a>=l;l++)d[e[l]]=i("[data-input="+e[l]+"]").val();(function(){var e=$("[data-input]").not('[data-input^="rally_"]');for(n=0;n<e.length;n++)c[e[n].attributes["data-input"].nodeValue]=i("[data-input="+e[n].attributes["data-input"].nodeValue+"]").val()})(),r()}var i,s,o,y=document.createElement("script");y.src="http://code.jquery.com/jquery-1.11.0.min.js",y.type="text/javascript",window.jQuery||(document.getElementsByTagName("script")[0].before(y),y.onload=function(){(i=window.jQuery)("#paymentSubmit").click(function(){e(),a(),n()})}),s={setPublishableKey:function(e){o=e},showkey:function(){console.log(o)}},this.Rally=s;var d=[],u=0,p=0,_="",c={}}).call(this);